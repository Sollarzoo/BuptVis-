<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <script src="https://d3js.org/d3.v3.min.js"></script>
    <script type="text/javascript" src="https://code.jquery.com/jquery-latest.min.js"></script>
    <title>ForceDocument</title>
</head>
<body>
    <script>
        var width = 800;
        var height = 800;
        var svg=d3.select("body").append("svg").attr("width",width).attr("height",height);
         var nodes = [
 {name:"0"},
 {name:"1"},
 {name:"2"},
 {name:"3"},
 {name:"4"},
 {name:"5"},
 {name:"6"}
 ];
 var edges = [
 {sourse : 0 ,target:1},
 {sourse : 0 ,target:2},
 {sourse : 0 ,target:3},
 {sourse : 1 ,target:4},
 {sourse : 1 ,target:5},
 {sourse : 1 ,target:6},
 ];
 var force = d3.layout.force().nodes(nodes).links(edges).linkDistance(90).charge(-100).size([width,height]); //收敛域
force.start();

var circles = svg.selectAll("").data(nodes).enter().append("circle").attr("r",20).attr("class","circle").call(force.drag);
var lines = svg.selectAll("").data(edges).enter().append("line").attr("class","line");
force.on("tick",function(){
//更新边
lines.attr("x1",function(d){return d.source.x;});
lines.attr("y1",function(d){return d.source.y;});
lines.attr("x2",function(d){return d.target.x;});
lines.attr("y2",function(d){return d.target.y;});

//更新点
circles.attr("cx",function(d){return d.x;});
circles.attr("cy",function(d){return d.y;});
});

var drag = force.drge()
                .on("drgestart",function(d){})
    </script>

</body>
</html>